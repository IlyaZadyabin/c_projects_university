Submit a solution for up09-1-Отцы и дети (дореш)
Full score:	100
Run penalty:	10
Time limit:	1 s
Real time limit:	5 s
Memory limit:	64M
Stack limit:	8M
Open date:	2019/11/18 00:00:00
Date penalty formula:	2019/12/31 0-50/14d
Next soft deadline:	2019/12/02 00:00:00
Problem up09-1: Отцы и дети (дореш)
В аргументах командной строки передаются параметры CMD FILE1 FILE2 FILE3. Реализуйте запуск процесса CMD с перенаправлением стандартных потоков как в команде:

CMD < FILE1 >> FILE2 2> FILE3
Файлы FILE2, FILE3 должны создаваться с помощью системного вызова open с правами чтение-запись для владельца и группы. Если файл уже существует, его права доступа не изменяются. Если в созданном в рамках вашей программы процессе-сыне какой-либо системный вызов завершился с ошибкой, этот процесс должен завершиться с кодом 42.

После завершения созданного процесса родитель должен напечатать на стандартный поток вывода целое число - статус завершения процесса, заполненное в результате системного вызова wait без каких-либо модификаций. Процесс-родитель должен завершаться самым последним из всех процессов. Процесс-родитель всегда завершается с кодом 0.

Для запуска файла на выполнение используйте execlp. Не используйте umask для изменения соответствующего параметра процесса.

Например, при запуске вашей программы:

  ./prog wc in.txt out.txt err.txt
В отдельном процессе должна быть запущена программа wc, ее стандартный ввод должен быть перенаправлен на чтение из файла in.txt, стандартный вывод - на добавление в файл out.txt, а стандартный поток ошибок - на перезапись в файл err.txt.


Submit a solution for up09-2-Тарас Бульба (дореш)
Full score:	100
Run penalty:	10
Input file name:	input
Time limit:	1 s
Real time limit:	5 s
Memory limit:	64M
Stack limit:	8M
Open date:	2019/11/18 00:00:00
Date penalty formula:	2019/12/31 0-50/14d
Next soft deadline:	2019/12/02 00:00:00
Problem up09-2: Тарас Бульба (дореш)
Напишите функцию:

int mysys(const char *str);
Функция должна работать аналогично функции system, то есть создавать процесс, запускать на выполнение строку str и дожидаться результата.

Строка str может содержать несколько аргументов, разделенных пробелами.

Функция mysys должна возвращать -1 в случае, если новый процесс не может быть создан. Если выполнение str завершилось с кодом завершения 0-127, функция должна возвращать это значение. Если выполнение str завершилось из-за сигнала K, то функция должна возвращать значение 128 + K.

Если интерпретатор /bin/sh не может быть запущен, функция должна завершаться со значением 127.

Для интерпретации строки str должен использовать стандартный шелл /bin/sh. (sh -c STR).

Сама функция mysys не должна ничего выводить ни на стандартный поток ошибок, ни на стандартный поток вывода.

Функция mysys должна корректно работать независимо от использования основным процессом других функций создания процессов и функций ввода-вывода.



Submit a solution for up09-3-Три сестры (дореш)
Full score:	100
Run penalty:	10
Time limit:	1 s
Real time limit:	5 s
Memory limit:	64M
Stack limit:	8M
Open date:	2019/11/18 00:00:00
Date penalty formula:	2019/12/31 0-50/14d
Next soft deadline:	2019/12/02 00:00:00
Problem up09-3: Три сестры (дореш)
Программе в аргументах командной строки передаются три команды для выполнения. Программа должна запустить на выполнение процессы, чтобы они выполнялись в конфигурации, соответствующей команде shell:

{ cmd1 || cmd2 } && cmd3
Родительский процесс должен дождаться завершения всех созданных им процессов и сам завершить выполнение с кодом возврата 0 или 1 в зависимости от успешности выполнения процессов.

Команды cmd1, cmd2, cmd3 можно запускать на выполнение с помощью execlp.

Запись a || b означает то же самое, что !a?b:true. Запись a && b означает то же самое, что a?b:false. Скобки { и } используются для группировки.

Для шелла процесс считается завершившимся успешно, если процесс завершился с помощью системного вызова exit (макрос WIFEXITED возвращает истинное значение), и код завершения процесса (макрос WEXITSTATUS) равен 0. В других случаях процесс считается завершившимся неуспешно.

Соответственно, ваша программа должна завершиться с кодом 0 в случае успешного выполнения заданной группы процессов и с кодом 1 в случае неуспешного их выполнения.

Организуйте вашу программу таким образом, чтобы избежать дублирование кода. В частности, запуск процесса и проверка статуса его завершения может быть вынесена в функцию.

Примечания по тестированию вашей программы:. Тестирование завершается с вердиктом 'Synchronization error', если процесс-отец (то есть ваша программа, запускаемая на тестирование) заканчивает работу раньше какого-либо из своих потомков.


Submit a solution for up09-4-The Jungle Book (дореш)
Full score:	100
Run penalty:	10
Time limit:	1 s
Real time limit:	5 s
Memory limit:	64M
Stack limit:	8M
Open date:	2019/11/18 00:00:00
Date penalty formula:	2019/12/31 0-50/14d
Next soft deadline:	2019/12/02 00:00:00
Problem up09-4: The Jungle Book (дореш)
В аргументах командной строки передаются целые положительные числа произвольного размера. Число передаваемых аргументов больше или равно 1. На стандартный поток вывода напечатайте произведение этих чисел.

Для вычисления результата используйте скриптовый язык программирования, поддерживающий арифметику произвольной точности, например, python, python3.

На языке python3 умножение двух чисел выглядит следующим образом:

print(1*2)
Если записать эту программу в файл apb.py и запустить интерпретатор командой

python3 apb.py
То на стандартном потоке вывода будет получен результат:

2
Ваша программа должна создать скрипт, который не будет требовать никаких дополнительных входных данных и при запуске выведет на стандартный поток вывода произведение чисел. При запуске команды на выполнение из вашей программы не должно указываться явное имя интерпретатора, поэтому в скрипте используйте запись #!.

Не создавайте новый процесс. Ваша программа может запускаться в произвольном рабочем каталоге. Программа должна поддерживать возможность одновременной работы своих копий. Программа не должна допускать возможность изменения скрипта другими пользователями. Скрипт должен удаляться после выполнения.

Не используйте функции tmpnam, tmpnam_r, mktemp, mkstemp, tmpfile и аналогичные. В качестве пути к каталогу временных файлов используйте значение переменной окружения XDG_RUNTIME_DIR, если эта переменная не установлена, используйте значение переменной окружения TMPDIR, если и эта переменная не установлена, используйте путь /tmp.

