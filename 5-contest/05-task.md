Submit a solution for up04-1-Про Смурфетту
Time limit:	1 s
Real time limit:	5 s
Memory limit:	64M
Stack limit:	8M
Problem up04-1: Про Смурфетту 
Смурфетта захотела уточнить свои траты за последний месяц. Особенно ее интересуют не траты на самую дорогую покупку, а на вторую по дороговизне покупку. Для этого Смурфетта просматривает все чеки и находит в них вторую по дороговизне покупку в совокупности всех чеков. Несколько покупок по одной цене считаются как одна покупка.

Например, если Смурфетта сделала 5 покупок, заплатив 100, 80, 100, 90, 100, то вторая по дороговизне покупка - 90.

В аргументах командной строки передаются имена входных файлов, содержащих информацию о чеках. Информация о каждом чеке представляет собой бинарный файл, состоящий из записей. Первые 16 байт каждой записи — это наименование товара (строка), а последующие 4 байта — целое число — уплаченная сумма в смурпейках. В одном чеке может быть произвольное количество записей, чек может быть пустым. Уплаченная сумма записывается как знаковое 32-битное число в формате Little-Endian. Уплаченная сумма может быть как положительной, так и отрицательной.

На стандартный поток вывода напечатайте искомую сумму в традиционном формате: смурбли отделены от смурпеек символом “точка”, смурпейки записываются всегда двумя цифрами. Если по какой-либо причине второй по дороговизне покупки нет, ничего не выводите.

Можете предполагать, что компьютер, на котором выполняется программа, хранит целые числа в формате LE.

Для работы с файлами используйте POSIX API (open, read, write, etc).


Submit a solution for up04-2-Про Apple Jack
Time limit:	1 s
Real time limit:	5 s
Memory limit:	64M
Stack limit:	8M
Problem up04-2: Про Apple Jack 
Известно, что в мире розовых пони целые числа представляются в формате, в котором число, состоящее из нескольких байт, записывается в порядке от старшего байта к младшему. Apple Jack хочет написать программу, которой на стандартном потоке ввода подаются 16-битные беззнаковые целые числа (и да, даже в мире розовых поней один байт содержит 8 бит), а в заданный выходной файл эти числа записываются в формате розовых пони.

Помогите Apple Jack написать программу!

Имя выходного файла указывается в командной строке. Выходной файл должен быть создан с правами только на чтение и запись только для владельца, если он не существовал. Если файл существовал, права доступа не меняйте.

Для записи выходного файла используйте POSIX API.

Для записи чисел используйте системный вызов write, в который передается буфер размера 2.

В мире розовых пони все входные данные корректны, все системные вызовы завершаются успешно.


Submit a solution for up04-3-Про Искандера Боевую Ракету 
Input file name:	input.txt
Time limit:	1 s
Real time limit:	5 s
Memory limit:	64M
Stack limit:	8M
Problem up04-3: Про Искандера Боевую Ракету
Русский хакер с ником “Искандер Боевая Ракета” проник в суперсекретный утюг президента одной из стран чтобы повлиять на выборы с помощью формирования общественного мнения, используя степерь проглаженность костюмов.

Оказалось, что секретная информация о глажке костюмов хранится в виде бинарного дерева поиска в файле. Необходимо извлечь эту информацию.

В аргументах командной строки задается имя входного бинарного файла произвольного доступа. Бинарный файл рассматривается как массив структур:


struct Node
{
    int32_t key;
    int32_t left_idx;
    int32_t right_idx;
};
Структура описывает вершину бинарного дерева поиска, где key – ключ поиска, а значения left_idx и right_idx – индексы в массиве соответственно левой и правой вершины. Корень дерева находится в элементе массива с индексом 0. Признаком отсутствия соответствующего поддерева в вершине является индекс, равный 0.

Числа в файле хранятся в естественном для x86 представлении (little-endian).

На стандартный поток вывода напечатайте ключи, размещенные в данном дереве, в порядке убывания.



Считывать содержимое всего файла в память целиком одним блоком запрещается. Для чтения содержимого файла необходимо пользоваться низкоуровневым вводом-выводом (open/read/etc). Корректная работа на big-endian архитектуре не требуется. Не используйте низкоуровневые манипуляции с памятью (union, приведение типов указателей). Не используйте библиотечные функции преобразования.

Для вывода ключей можно использовать высокоуровневые потоки (stdout).

Не забывайте выводить '\n' в конце вывода.

В программе должна быть реализована проверка корректности чтения из файла. Минимизируйте число системных вызовов, необходимых для чтения одной записи из файла.


Submit a solution for up04-4-Про Мииихаила и Игооооря 
Time limit:	1 s
Real time limit:	5 s
Memory limit:	64M
Stack limit:	8M
Problem up04-4: Про Мииихаила и Игооооря 

Мииихаил и Игоооорь играют в чате в следующую игру. Один игрок отправляет другому файл, который должен быть обработан по специальным правилам и переслан судье Petrovi4. Выигрывает тот игрок, который переслал судье файл, контрольная сумма которого делится нацело на константу G.

Вам нужно написать программу, обрабатывающую файл по правилам игры. Пересылать файл или проверять его контрольную сумму не требуется.

В аргументах командной строки задается путь к бинарному файлу, содержащему целые знаковые числа типа long long, записанные в порядке байт хоста (компьютера, на котором исполняется программа). В файле найдите минимальное число и поменяйте его знак. Если минимальное число в файле встречается несколько раз, поменяйте знак только у первого по порядку минимального числа. При вычислениях предполагайте неограниченную битность, но в качестве результата оставьте младшие 64 бита.

Для работы с файлом используйте POSIX API. Допускается только один проход по файлу, но бинарный файл является файлом произвольного доступа.

На 32-битных системах компилируйте вашу программу с опцией -D_FILE_OFFSET_BITS=64. Не допускайте в программе undefined behavior.

Например, если дан входной бинарный файл input.bin, результатом обработки его должен быть файл распечатка содержимого которого показана ниже.

hexdump -C input.bin
00000000  03 00 00 00 00 00 00 00  fe ff ff ff ff ff ff ff  |................|
00000010  04 00 00 00 00 00 00 00                           |........|
00000018


Submit a solution for up04-5-Про Шашлык Свинину и Люлю Кебаб 
Time limit:	1 s
Real time limit:	5 s
Memory limit:	64M
Stack limit:	8M
Problem up04-5: Про Шашлык Свинину и Люлю Кебаб 
Торговой сети (Without Name) требуется разработать программу, которая будет формировать файл с ассортиментом продаваемых товаров для передачи клиентам. Особенность некоторых изделий, таких как Шашлык Свинина или Люля Кебаб в том, что выходной файл требуется формировать очень специальным образом. Напишите программу, формирующую выходной файл, удовлетворяющий заданным требованиям.

В аргументах командной строки задаются три параметра:

Путь к файлу path. Файл является файлом произвольного доступа.
Начальное значение h0. Это значение типа unsigned long long, задаваемое в шестнадцатеричном виде.
Количество значений для добавления count (count >= 0).
Во внешнем файле function.c дана функция

unsigned long long hash_function(unsigned long long);
Эта функция позволяет получить следующее значение последовательности h из предыдущего.

В конец файла path допишите count элементов последовательности h в обратном порядке, то есть hcount-1, hcount-2, ..., h0. Элементы последовательности должны записываться в бинарном виде в порядке байт, совпадающем с порядком байт в памяти выполняющейся программы (host byte order). Элементы последовательности не разрешается накапливать в памяти. В случае создания файл должен получать права на чтение и запись для владельца и группы. Другие права должны отсутствовать.

Для работы с выходным файлом используйте POSIX API. Для записи одного числа используйте один системный вызов write.

На 32-битных системах компилируйте вашу программу с опцией -D_FILE_OFFSET_BITS=64.

Например, если программа запущена следующим образом:

rm out.bin; ./solution out.bin 11223344 4
То должен быть создан файл out.bin, и команда hexdump -C out.bin выдаст следующий результат:

00000000  6a 86 b3 95 19 0d 1f c6  09 a7 0d 77 3c ab 64 dc  |j..........w<.d.|
00000010  8b 7d df 2a c6 26 14 6b  44 33 22 11 00 00 00 00  |.}.*.&.kD3".....|
00000020

